# укус. Тут многое спизжено с прототипов фрага, агада, кто-то сомневался?
#- type: entity 
#  id: LavalandAshDrakeAttack
#  parent: WeaponArcStatic
#  noSpawn: true
#  components:
#    - type: WeaponArcVisuals
#      fadeOut: false
#    - type: Sprite
#      sprite: _Lavaland/Mobs/Bosses/bite.rsi
#      layers:
#        - state: bite
#    - type: TimedDespawn
#      lifetime: 0.399

# сам дрейк
- type: entity
  name: ash drake
  id: LavalandBossAshDrake
  description: drakeeeeeee
  components:
  - type: HTN
    rootTask:
      task: SimpleHostileCompound
  - type: NpcFactionMember
    factions:
    - Dragon
  - type: MeleeWeapon
#   soundHit:
#       path: /Audio/Weapons/Xeno/alien_claw_flesh3.ogg
#   angle: 0
#  animation: LavalandAshDrakeAttack
    damage:
      types:
        Blunt: 40
        Piercing: 20

# Basic stuff
  - type: Physics
    bodyType: KinematicController
  - type: Fixtures
    fixtures:
      fix1:
        shape:
          !type:PhysShapeAabb
          bounds: "-0.35,-0.6,0.35,0.6"
        density: 50
        mask:
        - MobMask
        layer:
        - MobLayer
  - type: Clickable
  - type: InteractionOutline
  - type: InputMover
  - type: Input
    context: "human"
  - type: LagCompensation
  - type: MobMover
  - type: Actions
  - type: Appearance
  - type: RotationVisuals
    defaultRotation: 0
    horizontalRotation: 0
  - type: DoAfter
  - type: Examiner
  - type: Eye
  - type: ContentEye
  - type: RequireProjectileTarget
    active: False
  - type: CombatMode
  - type: MobState

  - type: Sprite
    noRot: true
    drawdepth: Mobs
    sprite: _Lavaland/Mobs/Bosses/ash_drake.rsi
    state: dragon
  - type: AshDrakeBoss
    loot: LavalandAshDrakeDead
    crusherLoot: LavalandCrusherAshDrakeDead
  - type: Damageable
  - type: MovementSpeedModifier
    baseWalkSpeed: 0
    baseSprintSpeed: 0
  - type: NoSlip
  - type: MobThresholds
    thresholds:
      0: Alive
      4000: Dead
  - type: Tag
    tags:
    - CannotSuicide
  - type: Aggressive # also required component for aggro checking
  - type: Fauna

  #- type: DamageStateVisuals
  #  states:
  #    Alive:
  #      Base: dragon
  #    Dead:
  #      Base: dragon_dead


- type: entity
  id: LavalandAshDrakeDead
  parent: BaseMob
  name: drake dead
  description: drakeeeeee.
  components:
  - type: Sprite
    noRot: true
    drawdepth: Mobs
    sprite: _Lavaland/Mobs/Bosses/ash_drake.rsi
    state: dragon_dead
 # - type: Damageable
  - type: MovementSpeedModifier
    baseWalkSpeed: 0
    baseSprintSpeed: 0
  - type: Butcherable
    spawned:
    - id: MaterialAshDrakeBones1
      amount: 30
    - id: MaterialGoliathHide1
      amount: 12

- type: entity
  id: LavalandCrusherAshDrakeDead
  parent: BaseMob
  name: drake dead
  description: drakeeeeee.
  components:
  - type: Sprite
    noRot: true
    drawdepth: Mobs
    sprite: _Lavaland/Mobs/Bosses/ash_drake.rsi
    state: dragon_dead
  - type: MovementSpeedModifier
    baseWalkSpeed: 0
    baseSprintSpeed: 0
  - type: Butcherable
    spawned:
    - id: MaterialAshDrakeBones1
      amount: 30
    - id: MaterialGoliathHide1
      amount: 12
    - id: LavalandDrakeCrusherUpgrade
      amount: 1



- type: entity
  id: LavalandAshDrakeFire
  parent: HereticFireAA
  name: fire
  description: fireeeeeeee.
  components:
    - type: TimedDespawn
      lifetime: 1.2

- type: entity 
  id: LavalandSupportMarkAshDrake
  name: metka 
  description: metkeeeeeeeeee.
  parent: WoodenSupport
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Specific/Lavaland/marks.rsi
    state: target_circle
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        mask:
        - FullTileMask
        layer:
        - WallLayer
        density: 1000
  - type: TimedDespawn 
    lifetime: 2
  - type: SpawnOnDespawn
    prototype: LavalandAshDrakeFire

- type: entity 
  id: LavalandSupportLavaMarkAshDrake
  name: metkaaaaa
  description: eeeeee
  parent: WoodenSupport
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Specific/Lavaland/marks.rsi
    state: skull
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        mask:
        - FullTileMask
        layer:
        - WallLayer
        density: 1000
  - type: TimedDespawn 
    lifetime: 1.5
  - type: SpawnOnDespawn
    prototype: FloorLavaEntityDrake      


- type: entity 
  id: LavalandSupportSafeMarkAshDrake
  name: metka
  description: ya ystal
  parent: WoodenSupport
  components:
  - type: Sprite
    sprite: _Lavaland/Objects/Specific/Lavaland/marks.rsi
    state: safe
  - type: Fixtures
    fixtures:
      fix1:
        hard: false
        shape:
          !type:PhysShapeAabb
          bounds: "-0.5,-0.5,0.5,0.5"
        mask:
        - FullTileMask
        layer:
        - WallLayer
        density: 1000
  - type: TimedDespawn 
    lifetime: 2.5
  - type: TileEmission
    color: "#FF4500"
        
- type: entity 
  id: FloorLavaEntityDrake
  name: lava
  description: suka!
  parent: FloorLavaEntity 
  components:
  - type: TimedDespawn 
    lifetime: 3


# арена
- type: entity
  parent: LavalandSupportLavaMarkAshDrake
  id: LavalandSupportLavaArenaMarkAshDrake
  name: metka
  description: Bruh.
  components:
  - type: TileEmission
    color: "#FF4500"
  - type: TimedDespawn 
    lifetime: 1.5
  - type: SpawnOnDespawn
    prototype: FloorLavaArenaEntityDrake

- type: entity 
  id: FloorLavaArenaEntityDrake
  name: lava
  description: suka!
  parent: FloorLavaEntity 
  components:
  - type: TimedDespawn 
    lifetime: 1


- type: entity
  name: sunduk
  description: sunduk alee.
  id: LavalandCrateNecropolisAshDrake
  parent: LavalandCrateNecropolis
  suffix: AshDrake
  components:
  - type: StorageFill
    contents:
      - id: LavalandAshDrakeCrucifixes

# эээ, базальтовая нерушимая стена... даааа
- type: entity
  parent: BaseWall
  id: LavalandAshDrakeWallBasaltCobblebrick
  name: basalt brick wall
  components:
  - type: Tag
    tags:
      - Wall
  - type: Sprite
    sprite: Structures/Walls/cobblebrick_basalt.rsi
  - type: Icon
    sprite: Structures/Walls/cobblebrick_basalt.rsi
  - type: Destructible
  - type: IconSmooth
    key: cobblebricks
    base: cobblebrick